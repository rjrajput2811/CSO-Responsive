@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - CSO </title>
    <link href="~/css/icomoon/styles.min.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/fontawesome/styles.min.css" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link href="~/css/bootstrap.min.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/bootstrap_limitless.min.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/colors.min.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/components.min.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/layout.min.css" rel="stylesheet" asp-append-version="true" />


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // $(document).ready(function () {
        //     // Get the current URL
        //     var currentUrl = window.location.href.toLowerCase();

        //     // Highlight the active menu item for non-treeview items

        //     $('ul.nav-sidebar a').filter(function () {
        //         return this.href.toLowerCase() === currentUrl;
        //     }).addClass('menu-active');

        //     // For treeview items (submenus)
        //     $('ul.nav-group-sub a').filter(function () {
        //         return this.href.toLowerCase() === currentUrl;
        //     }).each(function () {
        //         // Open the parent submenu and highlight the active item
        //         $(this).closest('.nav-item-submenu').addClass('menu-open');
        //     });

        //     $('.nav-group-sub').each(function () {
        //         // Check if the submenu contains an active item
        //         if ($(this).find('.menu-active').length > 0) {
        //             $(this).addClass('open');
        //         }
        //     });
        // });
    </script>

    <style type="text/css">
        .menu-active {
            background-color: #fff !important;
            color: black !important;
            font-weight: bold;
            font-size: small;
            border-radius: 8px;
        }

        .nav-group-sub {
            display: none;
        }

            .nav-group-sub.open {
                display: block; /* Show the submenu when it has the 'open' class */
                color: #FFFF00 !important;
            }

        @@media (max-width: 767.98px) {
            .navbar-brand {
                flex-direction: column !important;
                align-items: flex-start !important;
            }

                .navbar-brand span {
                    font-size: 14px !important;
                    line-height: 1.3;
                    white-space: normal;
                }
        }

        /* Navbar container */
        .navbar {
            background-color: #ffffff;
            border-bottom: 1px solid #ddd;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);
        }

        /* Nav links */
        .navbar-nav .nav-link {
            color: #333;
            font-weight: 500;
            padding: 12px 18px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            text-decoration: none;
            border-radius: 5px;
        }

            /* Nav icons */
            .navbar-nav .nav-link i {
                margin-right: 8px;
                font-size: 16px;
                color: #5a68c7;
            }

            /* Hover Effect */
            .navbar-nav .nav-link:hover,
            .navbar-nav .nav-link:focus {
                background-color: #f0f2ff;
                color: #5a68c7;
            }

            /* Active/Selected Menu */
            .navbar-nav .nav-link.active,
            .navbar-nav .nav-link.selected {
                background-color: #5a68c7;
                color: #fff !important;
            }

                .navbar-nav .nav-link.active i,
                .navbar-nav .nav-link.selected i {
                    color: #fff;
                }

        /* Dropdown toggle */
        .navbar-nav .dropdown-toggle::after {
            margin-left: 6px;
            vertical-align: middle;
        }

        /* Dropdown menu */
        .dropdown-menu {
            border: 1px solid #eee;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            background-color: #fff;
            border-radius: 6px;
            padding: 15px;
            z-index: 1000;
        }

        /* Dropdown content columns */
        .dropdown-content-body .col-md-3 {
            padding: 10px;
        }

        /* Dropdown headings */
        .dropdown-content-body .font-weight-bold,
        .dropdown-content-body .font-weight-semibold {
            color: #444;
            font-size: 15px;
        }

        /* Inner dropdown nav links */
        .dropdown-menu .nav-link {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            color: #444;
            font-size: 14px;
            transition: background-color 0.2s;
            border-radius: 4px;
        }

            .dropdown-menu .nav-link i {
                margin-right: 8px;
                color: #5a68c7;
            }

            /* Hover on inner links */
            .dropdown-menu .nav-link:hover {
                background-color: #eef1ff;
                color: #5a68c7;
            }


    </style>
</head>
<body>
    <!-- Main navbar -->
    <div class="navbar navbar-expand-md navbar-dark bg-indigo navbar-static">
        @*<div class="navbar-brand">
        <a href="index.html" class="d-inline-block">

        </a>
        </div>*@

        <div class="d-md-none">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-mobile">
            </button>
            <button class="navbar-toggler sidebar-mobile-main-toggle" type="button">
            </button>
        </div>

        <div class="collapse navbar-collapse" id="navbar-mobile">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a href="#" class="navbar-nav-link sidebar-control sidebar-main-toggle d-none d-md-block">
                        <i class="icon-paragraph-justify3"></i>
                    </a>
                </li>
            </ul>

            <span class="navbar-text ml-md-3 font-weight-bolder" style="font-size:22px;" id="spnLogin">
                <span class="badge mr-2"></span> @* badge-mark  border-orange-300*@
                Customer Satisfaction Opportunities
                @*<span style="font-size:12px;">Version:@CSO.Web.HtmlHelperExtensions.GetApplicationVersion()</span>*@
                <span style="font-size:12px;">Version:3.14  Date: 10-04-2025</span>
            </span>


            @if (@HttpContextAccessor.HttpContext.Session.GetInt32("UserId") > 0)
            {
                <ul class="navbar-nav ml-md-auto">
                    <li class="nav-item" style="margin-top: 0.875rem; margin-right: 10px; white-space: nowrap; ">
                        @if (@HttpContextAccessor.HttpContext.Session.GetString("FullName") != null)
                        {
                            <span class="font-weight-bold">Welcome @HttpContextAccessor.HttpContext.Session.GetString("FullName")</span>
                        }
                    </li>
                    <li class="nav-item" style="margin-top: 0.875rem; margin-right: 10px; white-space: nowrap">
                        <div class="row">
                            <div class="col-1"><span class="font-weight-bold">FY:</span></div>
                            <div class="col-2">
                                <select id="ddlFinancialYear" style="border-radius:5px;">
                                    @{
                                        var fyStartMonth = DateTime.Now.Month;
                                        var fyYear = DateTime.Now.Year;
                                        if (fyStartMonth > 3)
                                        {
                                            fyYear = fyYear + 1;
                                        }
                                        var selectedFyYear = HttpContextAccessor.HttpContext.Session.GetString("FYear");
                                    }
                                    @for (int i = 2021; i < fyYear; i++)
                                    {

                                        var value = i.ToString().Substring(2) + (i + 1).ToString().Substring(2);
                                        var Text = i.ToString() + "-" + (i + 1).ToString().Substring(2);

                                        if (value == selectedFyYear)
                                        {
                                            <option value="@value" selected>@Text</option>
                                        }
                                        else
                                        {
                                            <option value="@value">@Text</option>
                                        }
                                    }

                                </select>
                            </div>
                        </div>

                    </li>
                    <li class="nav-item" style="margin-top: 0.875rem; margin-right: 10px;">
                        <a class="navbar-nav-link" id="iProfileIcon">
                            <i class="fa fa-user"></i>

                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#">My Account</a></li>
                            <li><a href="#">View Profile</a></li>
                            <li><a href="#">Edit Profile</a></li>
                            <li><a href="#">Change Password</a></li>
                            <li><a href="#">Setting</a></li>
                            <li><a href="#">Logout</a></li>
                        </ul>
                        @*@if (@HttpContextAccessor.HttpContext.Session.GetString("FullName") != null)
                    {
                    <span>@HttpContextAccessor.HttpContext.Session.GetString("FullName")</span>
                    }*@
                        @if (@HttpContextAccessor.HttpContext.Session.GetString("RoleName") != null)
                        {
                            <input type="hidden" id="hdnRoleName" style="float: right" value='@HttpContextAccessor.HttpContext.Session.GetString("RoleName")' />
                        }
                    </li>
                    <li class="nav-item" style="margin-top: 0.875rem;">
                        @*<a href="@Url.Action("LogOut", "Home")" class="navbar-nav-link">
                    <i class="icon-switch2"></i>
                    <span class="ml-2">Logout</span>
                    </a>*@
                        <a href="@Url.Action("LogOut", "Home")" class="navbar-nav-link">
                            <i class="fa fa-sign-out"></i>

                        </a>
                    </li>
                </ul>
            }
            else
            {
                <ul class="navbar-nav ml-md-auto">
                    <li class="nav-item">
                        <a href="@Url.Action("Login", "Account")" class="navbar-nav-link">
                            <i class="icon-switch2"></i>
                            <span class="ml-2">Login</span>
                        </a>
                    </li>
                </ul>
            }
        </div>
    </div>
    <!-- Secondary navbar -->
    <div class="navbar navbar-expand navbar-light px-0 px-lg-3">
        <div class="overflow-auto overflow-lg-visible scrollbar-hidden flex-1">
            <ul class="navbar-nav flex-row text-nowrap">
                <li class="nav-item">
                    <a asp-controller="" asp-action="" class="nav-link" title="Dashboard" id="Dashboard">
                        <i class="icon-home4"></i>
                        <span>Dashboard</span>
                    </a>
                </li>

                <li class="nav-item nav-item-dropdown-lg mega-menu-full">
                    <a href="#" class="navbar-nav-link dropdown-toggle" data-toggle="dropdown">
                        <i class="icon-stack2 mr-2"></i>
                        CSO
                    </a>

                    <div class="dropdown-menu dropdown-scrollable-lg wmin-lg-300 p-0">
                        <div class="dropdown-content-body">
                            <div class="row">
                                <div class="col-md-3 mb-3 mb-md-0">
                                    <div class="font-weight-bold border-bottom pb-2 mb-2">View Users</div>
                                    <a asp-controller="Users" asp-action="Index" class="nav-link" title="Dashboard" id="Dashboard">
                                        <i class="icon-people"></i>
                                        <span>Users</span>
                                    </a>

                                </div>

                                <div class="col-md-3 mb-3 mb-md-0">
                                    <div class="font-weight-bold border-bottom pb-2 mb-2">Log CSO</div>
                                    <a asp-controller="CSOLog" asp-action="CSOLog" class="nav-link" title="CSO Log" id="CSOLog">
                                        <i class="far fa-edit"></i>
                                        <span>CSO Log</span>
                                    </a>
                                    <a asp-controller="" asp-action="User Detail" class="nav-link" title="Analysis and Solution" id="AnalysisandSolution">
                                        <i class="fas fa-clipboard-list"></i>
                                        <span>Analysis and Solution</span>
                                    </a>
                                </div>

                                <div class="col-md-3">
                                    <div class="font-weight-bold border-bottom pb-2 mb-2">Report</div>
                                    <a asp-controller="" asp-action="" class="nav-link" title="MIS" id="MIS">
                                        <i class="fas fa-regular fa-folder-tree"></i>
                                        <span>MIS</span>
                                    </a>
                                    <a asp-controller="" asp-action="User Detail" class="nav-link" title="CSO Log Report" id="CSOLogReport">
                                        <i class="fas fa-regular fa-rectangle-list"></i>
                                        <span>CSO Log Report</span>
                                    </a>
                                </div>
                                <div class="col-md-3">
                                    <div class="font-weight-bold border-bottom pb-2 mb-2">Configration</div>
                                    <a asp-controller="" asp-action="" class="nav-link" title="Mail Matrix" id="Mail Matrix">
                                        <i class="fas fa-envelope-square"></i>
                                        <span>Mail Matrix</span>
                                    </a>
                                    <a asp-controller="" asp-action="User Detail" class="nav-link" title="Dashboard" id="Dashboard">
                                        <i class="icon-gear"></i>
                                        <span>Email/SMTP Setting</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-item nav-item-dropdown-lg mega-menu-full">
                    <a href="#" class="navbar-nav-link dropdown-toggle" data-toggle="dropdown">
                        <i class="icon-indent-decrease2 mr-2"></i>
                        Master
                    </a>

                    <div class="dropdown-menu dropdown-scrollable-lg wmin-lg-300 p-0">
                        <div class="dropdown-content-body">
                            <div class="row">
                                <div class="col-md-3 mb-3 mb-md-0">
                                    <div class="font-weight-semibold border-bottom pb-2 mb-2">Primary</div>
                                    <a asp-controller="Division" asp-action="Division" class="nav-link" title="Division" id="Division">
                                        <i class="icon-gear"></i>
                                        <span>Division</span>
                                    </a>
                                    <a asp-controller="Category" asp-action="Index" class="nav-link" title="Dashboard" id="Dashboard">
                                        <i class="icon-gear"></i>
                                        <span>Category</span>
                                    </a>
                                    <a asp-controller="ComplaintType" asp-action="ComplaintType" class="nav-link" title="Complaint Type" id="ComplaintType">
                                        <i class="icon-gear"></i>
                                        <span>Complain Type</span>
                                    </a>
                                    <a asp-controller="CsoClass" asp-action="CSOClass" class="nav-link" title="CSO Class" id="CsoClass">
                                        <i class="icon-gear"></i>
                                        <span>CSO Class</span>
                                    </a>
                                    <a asp-controller="Brand" asp-action="Brand" class="nav-link" title="Brand" id="Brand">
                                        <i class="icon-gear"></i>
                                        <span>Brand</span>
                                    </a>

                                </div>

                                <div class="col-md-3 mb-3 mb-md-0">
                                    <div class="font-weight-semibold border-bottom pb-2 mb-2">Secondary</div>
                                    <a asp-controller="ProductType" asp-action="ProductType" class="nav-link" title="Dashboard" id="Dashboard">
                                        <i class="icon-gear"></i>
                                        <span>Product Type</span>
                                    </a>
                                    <a asp-controller="Plant" asp-action="Plant" class="nav-link" title="Plant" id="Plant">
                                        <i class="icon-gear"></i>
                                        <span>Plant</span>
                                    </a>
                                    <a asp-controller="NearestPlant" asp-action="NearestPlant" class="nav-link" title="Nearest Plant" id="NearestPlant">
                                        <i class="icon-gear"></i>
                                        <span>Nearest Plant</span>
                                    </a>
                                    <a asp-controller="" asp-action="User Detail" class="nav-link" title="Dashboard" id="Dashboard">
                                        <i class="icon-gear"></i>
                                        <span>User Role</span>
                                    </a>
                                    <a asp-controller="RecycleDay" asp-action="RecycleDayConfiguration" class="nav-link" title="Dashboard" id="Dashboard">
                                        <i class="icon-gear"></i>
                                        <span>Recycle Days Configration</span>
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="content-wrapper">
        @RenderBody()
    </div>


    <!-- /page content -->


    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <!-- Core JS files -->
    <script src="~/js/app.js" asp-append-version="true"></script>
    <script src="~/js/bootstrap.bundle.min.js" asp-append-version="true"></script>
    <script src="~/js/noty.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.min.js" asp-append-version="true"></script>
    <script src="~/js/jquery.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/blockui.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/d3.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/d3_tooltip.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/switchery.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/moment.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/daterangepicker.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/echarts.min.js" asp-append-version="true"></script>
    <script src="~/js/Dashboard/progress.js" asp-append-version="true"></script>
    <script src="~/js/Dashboard/pie_basic.js" asp-append-version="true"></script>
    <script src="~/js/Dashboard/columns_basic.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/noty.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/popupalert.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/pnotify.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/interactions.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/touch.min.js" asp-append-version="true"></script>
    <script src="~/js/components_collapsible.js" asp-append-version="true"></script>
    <!-- /core JS files -->
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>